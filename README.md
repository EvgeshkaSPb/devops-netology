# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Обязательная задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.
```
Основное отличие аппаратной виртуализации - гипервизор сам по себе является ОС и все системные устройства ВМ эмулируются. Даже при пробросе реального устройства на ВМ, создается его эмулированая версия в устройствах ВМ. При этом ОС гипервизора обрезана и выполняет только функции связанные с виртуализацией. 

Паравиртуализация и виртуализация уровня ОС похожи, т.к. в обоих случаях гипервизор запускается на полноценной ОС, которая может выполнять другие задачи помимо виртуализвции.
В случае паравиртуализации мы можем запустить ОС с ядром отличющемся от хоста (при условии незначительной модификации), и гостевые ВМ работают с хостом через специальный API.
Виртуализация уровня ОС (контейнеризация). В данном случае сама ОС выступает гипервизором и запускает собственные копии в изолированном окружении (контейнеры). Контейнеры работают напрямую с ресурсам хоста.

По большому счету "виртуализацией" назвать можно только аппаратную и правиртуализацию, они могут обеспечить гетерогенность. А для виртуализацию уровня ОС - чаще называют контейнеризацией. 
```

## Обязательная задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.
```
Высоконагруженная база данных, чувствительная к отказу.  - Физические сервера (желательно кластер). Высокая нагрузка подразумевает высокие тробования к железу и минимальные задержки. Т.к. все гипервизоры так или иначе "отедают" часть системных ресурсов baremetal установка предпочтительнее.
Различные web-приложения. - Виртуализация уровня ОС. Я считаю, что в данном случае, больше подойдет контейнеризация, т.к. приложения как правило не потребляют много системных ресурсов и мы можем при необходимости быстро наращивать количество изолированных сред.
Windows системы для использования бухгалтерским отделом. - В данном случае я затрудняюсь с ответом. По условиям - у нас гомогенная среда и больше подойдет виртуализация уровня ОС. Но я не знаю рализаций "контейнеров" Win. По этому выбираем паравиртуализацию на Hyper-V =)
Системы, выполняющие высокопроизводительные расчеты на GPU. - Физические сервера. Как и в первой задаче - высокие требования к быстродействию.
```

## Обязательная задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
```
К требованиям данной задачи подходит XenServer.
В XenOrchestra реализована балансировка нагрузки, репликация и бэкап.
Полноценный гипервизор "корпоративного" уровня, с разумной стоимостью и нормальным центром управления.

*Изначально в ответ выбрал VMware т.к. нет условия "про деньги" и семейство продуктов закрывает все условия, кроме одного - у vmware с версии 6.7 нет собственной системы бэкапа. 
По этому в условия задачи не попадаем (ну, или +Veeam backup).
```
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
```
И снова я выберу XenServer т.к. он удовлетворяет условиям opensource и может поддерживать гетерогенную среду (в отличии от KVM).
```
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
```
Данные условия задачи не оставляют иного выбора - HyperV =). В гомогенной среде Microsoft, данный гипервизор покажет все свои сильные стороны. 
Быстрое развертывание, авторизация через AD, управление из "диспетчера серверов" любого win сервера.
```
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
```
Считаю в данном случае подойдет KVM. OpenSource, высокая производительность при работе c Linux, относительная "простота" настройки. Возможно, окружение вообще создается временно - на 2-3 мес. работы.
```

## Обязательная задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
```
По моему мнению, гетерогенной среда виртуализации имеет следующие проблемы:
- Высокая стоимость обслуживания. Самый ценный ресурс - это люди. Для работы с несколькими средами виртуализации нужно иметь несколько очень квалифицированных специалистов (вдруг кто заболеет или в отпуск уйдет).
- Сложность взаимодействия между разными средами. Перемещение ВМ и данных вызовет сложности т.к. часто разные гипервизоры "не дружат" между собой.
- Сложность маштабирования. При необходимость масштабирования, придется выбирать "какую ветку усиливать?". Часто ресурсы будут не полностью утилизированы в рамках одной из сред.
Минимизировавать данные проблемы, по моему мнению, возможно только тчательным планированием архитектуры сети (хотя, мне кажется, что гетерогенные среды возникают ввиду отсутствия планирования :))), это даст следующие "решения":
- Внятное понимание того, для чего используется каждая из сред и есть ли вообще необходимость в гетерогенности.
- Максимально изолированные потоки данных внутри каждой из сред, частично решат проблему взаимодействия между ними.
- Использование IssS снимает данные проблемы. Мы, обычно не знаем какая там виртуализация =) 
При постороении своей виртуальной среды, я бы предпочел отказаться от гетерогенности, ввиду минусов обозначенных выше и отсутвия очевидных плюсов такой конструкции.
Пример "сложностей" в работе с гетерогенной средой:
1. Используются 2 виртуальные среды VMware для рабочей сети и KVM для "песочницы". Их обслуживают сисадмин и devops инженер. Сисадмин уходит в отпуск, в это время от кластера vmware 
"отваливается" дисковая полка. Критичные процессы организации остановились, неквалифицированное подключение полки грозит потерей находящихся на ней данных. Очень хорошо, если devops учавствовал в развертывании среды vmware и сможет оперативно решить проблему.
Но, скорее всего, его оперативные знания ограничены "поднятием из бэкап", "перейти на снапшот" и прочее.
2. Один из хостов с KVM уходит на сервисное обслуживание или вообще сломался. Для того, что бы перебросить ВМ на хосты vmware, требуется конвертация, что займет кучу времени и сил.
3. В компании "внезапно" появилась новая команда и ей нужно место для своей небольшой песочницы. Хосты с KVM? которые используются для этих целей, уже максимально загружены и "оперативный резерв" есть только на хостах с vmware.
Отсюда необходимость оперативно наращивать мощности в среде KVM (что быстро, как правило, не происходит - этож деньги надо, а вы в бюджет на квартал не подали) и одновременно создавать песочницу на vmware, со вской "изоляцией" тестовой среды и прочим (что у вас есть по нормам). А потом, после покупок, перетаскивать все на KVM.
```
   